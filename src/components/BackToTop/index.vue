<template>
  <transition :name="transitionName">
    <div v-show="visible" :style="customStyle" class="back-to-ceiling" @click="backToTop">
      <!-- <svg width="16" height="16" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg" class="Icon Icon--backToTopArrow" aria-hidden="true" style="height:16px;width:16px"><path d="M12.036 15.59a1 1 0 0 1-.997.995H5.032a.996.996 0 0 1-.997-.996V8.584H1.03c-1.1 0-1.36-.633-.578-1.416L7.33.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.004z" /></svg>
   <svg t="1566915081460" width="20" height="20" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13830"><path d="M510.260891 266.552845c-37.476543 0-67.861574 30.385031-67.861574 67.861574 0 37.47552 30.385031 67.861574 67.861574 67.861574 37.47552 0 67.860551-30.386054 67.860551-67.861574C578.121442 296.937876 547.736411 266.552845 510.260891 266.552845zM510.260891 368.345206c-18.738783 0-33.930787-15.2094-33.930787-33.930787 0-18.755156 15.193027-33.930787 33.930787-33.930787 18.73776 0 33.930787 15.175631 33.930787 33.930787C544.191678 353.135806 528.997628 368.345206 510.260891 368.345206z" p-id="13831"></path><path d="M524.358981 860.344686c4.854565 4.041036 7.952112 10.138918 7.952112 16.96437 0 2.286066-0.347924 4.50664-0.99363 6.595208l0.347924-0.033769-21.157879 44.436048-19.102057-39.565111c-2.022053-3.313465-3.197832-7.257288-3.197832-11.432377 0-6.825452 3.097548-12.923334 7.952112-16.96437l-33.898041 0c-1.87265 5.300726-2.899026 11.000542-2.899026 16.96437 0 12.625552 4.605901 24.189935 12.243859 33.103956l21.901823 37.508265c1.325182 8.052396 8.317433 14.216793 16.750499 14.216793 8.134261 0 14.926968-5.732561 16.5837-13.386892l0.398066 0 24.620747-42.11519c5.848195-8.284687 9.293667-18.423605 9.293667-29.325909 0-5.963829-1.026376-11.663644-2.899026-16.96437L524.358981 860.34571z" p-id="13832"></path><path d="M713.68086 647.149073 648.440997 633.562637c18.210757-55.199183 31.473829-117.064182 31.473829-180.191942 0-201.36517-103.614869-340.568583-118.277824-357.3682-14.645558-16.766872-51.294247-33.003672-51.376111-33.102932 0 0-37.411051 15.772218-51.377134 33.102932C444.916651 113.364931 340.605933 252.005524 340.605933 453.370695c0 63.684438 13.505595 126.095883 31.961946 181.666526l-58.156538 12.111852c-18.356067 3.811816-28.695552 21.439288-23.2444 39.399335l54.606689 179.860391c3.114944 10.304693 10.918677 19.084661 20.528546 24.452925l8.036024-99.837846c1.50733-18.654872 17.479093-36.84721 35.836183-40.690748l9.751085-2.022053c29.359678 58.338686 55.625902 95.066169 55.625902 95.066169l34.262338 0 35.156708 0c0 0 26.693965-37.326117 56.338123-96.484472l16.609283 3.439332c18.35709 3.843538 34.328853 22.034852 35.837206 40.690748l8.036024 99.837846c9.609869-5.368264 17.396205-14.148231 20.527522-24.452925l54.607712-179.860391C742.376413 668.589384 732.036927 650.960889 713.68086 647.149073zM469.850529 158.827355c11.680017-21.438265 40.409338-42.479487 40.409338-42.479487l0.032746 5.16872 0.016373-5.135974c0 0 30.667463 22.797215 42.34748 44.236504 2.469238 4.54041 7.322779 11.332093 13.419637 21.107737L455.221344 181.724855C461.915813 170.95558 467.249285 163.632801 469.850529 158.827355zM688.331519 729.923288c-3.744277 18.753109-5.699816 37.872562-8.102538 37.872562-4.555759 0-12.243859-40.624233-45.428655-52.188616-5.548366-1.916653-10.910491-3.803629-16.036231-5.599532 0.055259-0.121773 0.109494-0.242524 0.163729-0.364297-21.886473-7.65433-38.835494-13.619182-42.729174-15.009855-27.949562 61.500703-56.562227 96.888677-56.562227 96.888677l-9.426697 0-9.360182 0c0 0-27.503401-34.062793-54.92289-93.408413-8.498558 2.958378-21.401426 7.490601-36.309974 12.707416-4.432962 1.547239-9.033747 3.139503-13.758352 4.787026-33.18582 11.564383-42.530652 51.924603-47.101761 51.924603-2.15406 0-4.391007-20.37812-8.068769-37.046754-4.142343-18.687618-6.28003-33.630958-1.724271-38.60218 4.089132-4.427846 26.120914-11.641131 48.250934-18.013259 17.302061-4.943592 34.647101-9.413394 43.518143-11.645225-21.289885-55.268768-39.183418-125.880989-39.183418-207.362768 0-119.620401 23.526833-194.043415 45.065382-239.207034l148.049894 0c21.125133 44.534286 44.352137 118.559233 44.352137 239.207034 0 80.18832-17.346063 149.905148-38.222533 204.777897 6.862291 1.699712 23.964808 6.005784 42.285059 11.087523-0.040932 0.103354-0.079818 0.207731-0.119727 0.311085 26.077935 7.257288 54.259788 15.972786 58.733683 20.843724C695.820074 696.355775 691.744245 712.791096 688.331519 729.923288z" p-id="13833"></path></svg> -->
   <svg t="1566915271791" width="40" height="40"  class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5625"><path d="M426.666667 748.088889c12.325926 87.22963 64.474074 153.6 64.474074 153.6s52.148148-66.37037 64.474074-153.6H426.666667z" fill="#FD6513" p-id="5626"></path><path d="M442.785185 746.192593c14.222222 60.681481 49.303704 104.296296 49.303704 104.296296s34.133333-43.614815 49.303704-104.296296H442.785185z" fill="#FD9C13" p-id="5627"></path><path d="M395.377778 785.066667L271.17037 945.303704V724.385185l124.207408-95.762963z" fill="#F12A3F" p-id="5628"></path><path d="M395.377778 664.651852v120.414815L312.888889 892.207407V729.125926z" fill="#C92334" p-id="5629"></path><path d="M586.903704 785.066667L711.111111 945.303704V724.385185L586.903704 628.622222z" fill="#F12A3F" p-id="5630"></path><path d="M586.903704 664.651852v120.414815l83.437037 107.14074V729.125926z" fill="#C92334" p-id="5631"></path><path d="M410.548148 156.444444c2.844444-4.740741 4.740741-8.533333 7.585185-13.274074-1.896296 4.740741-4.740741 8.533333-7.585185 13.274074zM374.518519 230.4c5.688889-13.274074 11.377778-26.548148 18.014814-38.874074-6.637037 12.325926-12.325926 25.6-18.014814 38.874074z" fill="#FDB813" p-id="5632"></path><path d="M421.925926 137.481481c3.792593-5.688889 7.585185-12.325926 11.377778-18.014814-3.792593 5.688889-7.585185 11.377778-11.377778 18.014814z" fill="#F12A3F" p-id="5633"></path><path d="M361.244444 263.585185z" fill="#FDB813" p-id="5634"></path><path d="M508.207407 62.577778c10.42963 13.274074 24.651852 33.185185 40.770371 56.888889-15.17037-24.651852-29.392593-43.614815-40.770371-56.888889zM549.925926 119.466667c3.792593 5.688889 7.585185 11.377778 11.377778 18.014814-4.740741-6.637037-8.533333-12.325926-11.377778-18.014814z" fill="#DB2639" p-id="5635"></path><path d="M646.637037 537.6c-1.896296 18.962963-4.740741 36.977778-7.585185 54.044444 2.844444-17.066667 5.688889-35.081481 7.585185-54.044444zM355.555556 280.651852l5.688888-17.066667-5.688888 17.066667zM371.674074 694.992593l-5.688889-17.066667c1.896296 6.637037 3.792593 12.325926 5.688889 17.066667zM590.696296 191.525926c5.688889 12.325926 12.325926 25.6 18.014815 38.874074-5.688889-13.274074-12.325926-26.548148-18.014815-38.874074zM622.933333 660.859259c-1.896296 5.688889-3.792593 12.325926-5.688889 18.014815 1.896296-6.637037 3.792593-12.325926 5.688889-18.014815zM344.177778 591.644444c-2.844444-17.066667-5.688889-35.081481-7.585185-54.044444 1.896296 18.962963 4.740741 36.977778 7.585185 54.044444zM349.866667 620.088889c-0.948148-5.688889-2.844444-12.325926-3.792593-18.014815 0.948148 5.688889 2.844444 12.325926 3.792593 18.014815zM365.985185 677.925926zM433.303704 119.466667zM410.548148 156.444444c-1.896296 3.792593-4.740741 8.533333-6.637037 12.325926 1.896296-3.792593 4.740741-8.533333 6.637037-12.325926zM508.207407 62.577778c-10.42963-13.274074-17.066667-20.859259-17.066666-20.859259s-6.637037 7.585185-17.066667 20.859259c10.42963-13.274074 17.066667-20.859259 17.066667-20.859259s6.637037 7.585185 17.066666 20.859259zM608.711111 230.4c4.740741 10.42963 8.533333 21.807407 13.274074 33.185185-4.740741-11.377778-8.533333-22.755556-13.274074-33.185185zM403.911111 168.77037l-11.377778 22.755556 11.377778-22.755556zM355.555556 280.651852c-15.17037 46.459259-25.6 98.607407-25.6 152.651852 0 36.02963 1.896296 71.111111 5.688888 105.244444-3.792593-33.185185-5.688889-68.266667-5.688888-105.244444 0-54.044444 10.42963-106.192593 25.6-152.651852zM621.037037 263.585185l5.688889 17.066667c-0.948148-5.688889-2.844444-11.377778-5.688889-17.066667zM491.140741 748.088889h-94.814815c-4.740741-8.533333-9.481481-18.962963-14.222222-28.444445 4.740741 10.42963 9.481481 19.911111 14.222222 28.444445H587.851852c4.740741-8.533333 9.481481-18.962963 14.222222-28.444445-4.740741 10.42963-9.481481 19.911111-14.222222 28.444445H491.140741zM590.696296 191.525926l-11.377777-22.755556 11.377777 22.755556zM652.325926 433.303704c0-54.044444-10.42963-105.244444-25.6-152.651852 16.118519 46.459259 25.6 98.607407 25.6 152.651852zM579.318519 168.77037l-14.222223-25.6c3.792593 8.533333 9.481481 17.066667 14.222223 25.6zM357.451852 651.377778c-1.896296-6.637037-3.792593-12.325926-4.740741-18.962963 1.896296 6.637037 2.844444 12.325926 4.740741 18.962963zM352.711111 632.414815c-0.948148-3.792593-1.896296-7.585185-2.844444-12.325926 0.948148 3.792593 1.896296 8.533333 2.844444 12.325926z" fill="#FDB813" p-id="5636"></path><path d="M491.140741 748.088889V168.77037h-87.22963l-11.377778 22.755556c-5.688889 12.325926-12.325926 25.6-18.014814 38.874074-4.740741 10.42963-8.533333 21.807407-13.274075 33.185185l-5.688888 17.066667c-15.17037 46.459259-25.6 98.607407-25.6 152.651852 0 36.02963 1.896296 71.111111 5.688888 105.244444 1.896296 18.962963 4.740741 36.977778 7.585186 54.044445 0.948148 3.792593 0.948148 6.637037 1.896296 10.429629 0.948148 5.688889 2.844444 12.325926 3.792593 18.014815 0.948148 3.792593 1.896296 7.585185 2.844444 12.325926 1.896296 6.637037 2.844444 13.274074 4.740741 18.962963 0.948148 2.844444 1.896296 6.637037 2.844444 9.481481 1.896296 5.688889 3.792593 12.325926 5.688889 18.014815l5.688889 17.066667c2.844444 8.533333 6.637037 16.118519 9.481481 23.703704 4.740741 10.42963 9.481481 19.911111 14.222223 28.444444h96.711111z" fill="#FDB813" p-id="5637"></path><path d="M491.140741 168.77037V41.718519s-6.637037 7.585185-17.066667 20.859259c-10.42963 13.274074-24.651852 33.185185-40.77037 56.888889-3.792593 5.688889-7.585185 11.377778-11.377778 18.014814-0.948148 1.896296-2.844444 3.792593-3.792593 6.637038-2.844444 3.792593-4.740741 8.533333-7.585185 13.274074-1.896296 3.792593-4.740741 8.533333-6.637037 12.325926h87.22963z" fill="#F12A3F" p-id="5638"></path><path d="M630.518519 632.414815c-1.896296 6.637037-2.844444 13.274074-4.740741 18.962963 0.948148-6.637037 2.844444-12.325926 4.740741-18.962963zM637.155556 602.074074c-1.896296 10.42963-3.792593 19.911111-6.637037 30.340741 1.896296-10.42963 3.792593-19.911111 6.637037-30.340741z" fill="#FD9B13" p-id="5639"></path><path d="M627.674074 280.651852l-5.688889-17.066667c-3.792593-11.377778-8.533333-22.755556-13.274074-33.185185-5.688889-13.274074-11.377778-26.548148-18.014815-38.874074l-11.377777-22.755556h-87.22963v579.318519H587.851852c4.740741-8.533333 9.481481-18.962963 14.222222-28.444445 5.688889-12.325926 10.42963-26.548148 16.118519-40.77037 1.896296-5.688889 3.792593-11.377778 5.688888-18.014815 0.948148-2.844444 1.896296-5.688889 2.844445-9.481481 1.896296-6.637037 3.792593-12.325926 4.740741-18.962963 2.844444-9.481481 4.740741-19.911111 6.637037-30.340741 0.948148-3.792593 0.948148-6.637037 1.896296-10.42963 2.844444-17.066667 5.688889-35.081481 7.585185-54.044444 3.792593-33.185185 5.688889-68.266667 5.688889-105.244444-0.948148-53.096296-10.42963-105.244444-25.6-151.703704z" fill="#FD9B13" p-id="5640"></path><path d="M491.140741 168.77037H578.37037l-14.222222-25.6c-0.948148-1.896296-2.844444-3.792593-3.792592-6.637037-3.792593-5.688889-7.585185-12.325926-11.377778-18.014814-16.118519-24.651852-30.340741-43.614815-40.770371-56.888889-10.42963-13.274074-17.066667-20.859259-17.066666-20.85926v128z" fill="#C92334" p-id="5641"></path><path d="M384.948148 726.281481c3.792593 7.585185 7.585185 15.17037 11.377778 21.807408h95.762963v-21.807408H384.948148z" fill="#FFFFFF" p-id="5642"></path><path d="M598.281481 726.281481H491.140741v21.807408h95.762963c3.792593-6.637037 7.585185-14.222222 11.377777-21.807408z" fill="#E1EDF7" p-id="5643"></path><path d="M491.140741 288.237037v212.385185c58.785185 0 106.192593-47.407407 106.192592-106.192592s-47.407407-106.192593-106.192592-106.192593z" fill="#E1EDF7" p-id="5644"></path><path d="M384.948148 395.377778c0 58.785185 47.407407 106.192593 106.192593 106.192592V288.237037c-58.785185 0-106.192593 48.355556-106.192593 107.140741z" fill="#FFFFFF" p-id="5645"></path><path d="M491.140741 305.303704v179.2c49.303704 0 89.125926-39.822222 89.125926-89.125926s-39.822222-90.074074-89.125926-90.074074z" fill="#1E2D4F" p-id="5646"></path><path d="M402.014815 395.377778c0 49.303704 39.822222 89.125926 89.125926 89.125926V305.303704c-49.303704 0-89.125926 39.822222-89.125926 90.074074z" fill="#2D4375" p-id="5647"></path></svg> 
    </div>
  </transition>
</template>

<script>
export default {
  name: 'BackToTop',
  props: {
    visibilityHeight: {
      type: Number,
      default: 400
    },
    backPosition: {
      type: Number,
      default: 0
    },
    customStyle: {
      type: Object,
      default: function() {
        return {
        right: '35px',
        bottom: '75px',
        width: '50px',
        height: '50px',
        'border-radius': '50%',
        'line-height': '50px', // 请保持与高度一致以垂直居中 Please keep consistent with height to center vertically
        background: '#409EFF' // 按钮的背景颜色 The background color of the button
        }
      }
    },
    transitionName: {
      type: String,
      default: 'fade'
    }
  },
  data() {
    return {
      visible: false,
      interval: null,
      isMoving: false
    }
  },
  mounted() {
    window.addEventListener('scroll', this.handleScroll)
  },
  beforeDestroy() {
    window.removeEventListener('scroll', this.handleScroll)
    if (this.interval) {
      clearInterval(this.interval)
    }
  },
  methods: {
    handleScroll() {

      this.visible = window.pageYOffset > this.visibilityHeight
    },
    backToTop() {
      if (this.isMoving) return
      const start = window.pageYOffset
      let i = 0
      this.isMoving = true
      this.interval = setInterval(() => {
        const next = Math.floor(this.easeInOutQuad(10 * i, start, -start, 500))
        if (next <= this.backPosition) {
          window.scrollTo(0, this.backPosition)
          clearInterval(this.interval)
          this.isMoving = false
        } else {
          window.scrollTo(0, next)
        }
        i++
      }, 16.7)
    },
    easeInOutQuad(t, b, c, d) {
      if ((t /= d / 2) < 1) return c / 2 * t * t + b
      return -c / 2 * (--t * (t - 2) - 1) + b
    }
  }
}
</script>

<style scoped>
.back-to-ceiling {
  position: fixed;
  display: inline-block;
  text-align: center;
  cursor: pointer;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity .5s;
}

.fade-enter,
.fade-leave-to {
  opacity: 0
}

.back-to-ceiling .Icon {
  fill: #fff;
  background: none;
}
</style>
